<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyCoin - Blockchain Cryptocurrency</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <i class="fas fa-coins"></i>
                    <span>MyCoin</span>
                </div>
                <div class="nav-menu">
                    <button class="nav-item active" data-tab="dashboard">
                        <i class="fas fa-chart-pie"></i>
                        <span>Dashboard</span>
                    </button>
                    <button class="nav-item" data-tab="wallet">
                        <i class="fas fa-wallet"></i>
                        <span>Ví (Wallet)</span>
                    </button>
                    <button class="nav-item" data-tab="send">
                        <i class="fas fa-paper-plane"></i>
                        <span>Gửi Coin</span>
                    </button>
                    <button class="nav-item" data-tab="history">
                        <i class="fas fa-history"></i>
                        <span>Lịch Sử</span>
                    </button>
                    <button class="nav-item" data-tab="mining">
                        <i class="fas fa-pickaxe"></i>
                        <span>Mining</span>
                    </button>
                    <button class="nav-item" data-tab="staking">
                        <i class="fas fa-coins"></i>
                        <span>Staking</span>
                    </button>
                </div>
                <div class="network-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Testnet</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboard">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <button class="refresh-btn" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i>
                        Làm mới
                    </button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon wallet">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="wallet-balance">0.00</h3>
                            <p>Số dư ví (MYC)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blocks">
                            <i class="fas fa-cubes"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="chain-length">0</h3>
                            <p>Số khối</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pending">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="pending-transactions">0</h3>
                            <p>Giao dịch chờ</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon staked">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="staked-amount">0.00</h3>
                            <p>Số coin đã stake</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="recent-transactions">
                        <h2>Giao dịch gần đây</h2>
                        <div class="transaction-list" id="recent-transactions-list">
                            <!-- Recent transactions will be loaded here -->
                        </div>
                    </div>
                    <div class="blockchain-info">
                        <h2>Thông tin Blockchain</h2>
                        <div class="info-item">
                            <span>Mining Reward:</span>
                            <span id="mining-reward">10.00 MYC</span>
                        </div>
                        <div class="info-item">
                            <span>Consensus:</span>
                            <span id="consensus-type">PoS</span>
                        </div>
                        <div class="info-item">
                            <span>Network:</span>
                            <span id="network-type">Testnet</span>
                        </div>
                        <div class="info-item">
                            <span>Chain Valid:</span>
                            <span id="chain-valid" class="status-good">✓ Valid</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Wallet Tab -->
            <div class="tab-content" id="wallet">
                <div class="page-header">
                    <h1>Quản lý Ví (Wallet)</h1>
                </div>
                
                <div class="wallet-section">
                    <div class="wallet-actions">
                        <button class="action-btn primary" onclick="showCreateWallet()">
                            <i class="fas fa-plus"></i>
                            Tạo ví mới
                        </button>
                        <button class="action-btn secondary" onclick="showImportWallet()">
                            <i class="fas fa-download"></i>
                            Import ví
                        </button>
                    </div>

                    <!-- Create Wallet Form -->
                    <div class="form-section" id="create-wallet-form" style="display: none;">
                        <h3>Tạo ví mới</h3>
                        <button class="action-btn primary" onclick="createWallet()">
                            <i class="fas fa-magic"></i>
                            Tạo ví ngẫu nhiên
                        </button>
                    </div>

                    <!-- Import Wallet Form -->
                    <div class="form-section" id="import-wallet-form" style="display: none;">
                        <h3>Import ví</h3>
                        <div class="import-options">
                            <div class="import-option">
                                <label>
                                    <input type="radio" name="import-type" value="private-key" checked>
                                    Private Key
                                </label>
                                <input type="password" id="private-key-input" placeholder="Nhập private key...">
                            </div>
                            <div class="import-option">
                                <label>
                                    <input type="radio" name="import-type" value="passphrase">
                                    Passphrase
                                </label>
                                <input type="password" id="passphrase-input" placeholder="Nhập passphrase...">
                            </div>
                        </div>
                        <button class="action-btn primary" onclick="importWallet()">
                            <i class="fas fa-download"></i>
                            Import ví
                        </button>
                    </div>

                    <!-- Wallet Info -->
                    <div class="wallet-info" id="wallet-info" style="display: none;">
                        <div class="wallet-header">
                            <div class="wallet-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="wallet-title">
                                <h3>Thông tin ví của bạn</h3>
                                <p>Quản lý thông tin ví MyCoin một cách an toàn</p>
                            </div>
                            <div class="wallet-balance-card">
                                <div class="balance-label">Số dư hiện tại</div>
                                <div class="balance-amount" id="current-wallet-balance">0.00 MYC</div>
                            </div>
                        </div>

                        <div class="wallet-details-grid">
                            <div class="wallet-detail-card">
                                <div class="detail-header">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Địa chỉ ví</span>
                                </div>
                                <div class="detail-content">
                                    <div class="copy-field">
                                        <input type="text" id="wallet-address" readonly class="address-input">
                                        <button onclick="copyToClipboard('wallet-address')" class="copy-btn" title="Copy địa chỉ">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="wallet-detail-card">
                                <div class="detail-header">
                                    <i class="fas fa-key"></i>
                                    <span>Public Key</span>
                                </div>
                                <div class="detail-content">
                                    <div class="copy-field">
                                        <input type="text" id="wallet-public-key" readonly class="key-input">
                                        <button onclick="copyToClipboard('wallet-public-key')" class="copy-btn" title="Copy public key">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="wallet-detail-card sensitive">
                                <div class="detail-header">
                                    <i class="fas fa-lock"></i>
                                    <span>Private Key</span>
                                    <span class="sensitive-badge">Bảo mật</span>
                                </div>
                                <div class="detail-content">
                                    <div class="copy-field">
                                        <input type="password" id="wallet-private-key" readonly class="key-input">
                                        <button onclick="togglePasswordVisibility('wallet-private-key')" class="toggle-btn" title="Hiện/Ẩn private key">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button onclick="copyToClipboard('wallet-private-key')" class="copy-btn" title="Copy private key">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="wallet-detail-card sensitive">
                                <div class="detail-header">
                                    <i class="fas fa-shield-alt"></i>
                                    <span>Passphrase</span>
                                    <span class="sensitive-badge">Bảo mật</span>
                                </div>
                                <div class="detail-content">
                                    <div class="copy-field">
                                        <input type="password" id="wallet-passphrase" readonly class="key-input">
                                        <button onclick="togglePasswordVisibility('wallet-passphrase')" class="toggle-btn" title="Hiện/Ẩn passphrase">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button onclick="copyToClipboard('wallet-passphrase')" class="copy-btn" title="Copy passphrase">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="wallet-security-notice">
                            <div class="security-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="security-content">
                                <h4>Lưu ý bảo mật quan trọng</h4>
                                <ul>
                                    <li><strong>Private Key</strong> và <strong>Passphrase</strong> là thông tin tuyệt đối bí mật</li>
                                    <li>Không bao giờ chia sẻ thông tin này với bất kỳ ai</li>
                                    <li>Lưu trữ an toàn và tạo bản sao lưu ở nơi khác</li>
                                    <li>Mất private key = mất toàn bộ tài sản trong ví</li>
                                </ul>
                            </div>
                        </div>

                        <div class="wallet-actions-footer">
                            <button class="action-btn secondary" onclick="exportWalletBackup()">
                                <i class="fas fa-download"></i>
                                Export Backup
                            </button>
                            <button class="action-btn warning" onclick="clearWalletData()">
                                <i class="fas fa-sign-out-alt"></i>
                                Xóa ví khỏi trình duyệt
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Send Tab -->
            <div class="tab-content" id="send">
                <div class="page-header">
                    <h1>Gửi MyCoin</h1>
                </div>
                
                <div class="send-section">
                    <div class="send-form">
                        <div class="form-group">
                            <label>Từ ví:</label>
                            <input type="text" id="send-from-address" placeholder="Địa chỉ ví gửi...">
                        </div>
                        <div class="form-group">
                            <label>Private Key:</label>
                            <input type="password" id="send-private-key" placeholder="Private key của ví gửi...">
                        </div>
                        <div class="form-group">
                            <label>Đến ví:</label>
                            <input type="text" id="send-to-address" placeholder="Địa chỉ ví nhận...">
                        </div>
                        <div class="form-group">
                            <label>Số lượng (MYC):</label>
                            <input type="number" id="send-amount" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Phí giao dịch (MYC):</label>
                            <input type="number" id="send-fee" step="0.01" min="0" value="0.01" placeholder="0.01">
                        </div>
                        <button class="action-btn primary" onclick="sendTransaction()">
                            <i class="fas fa-paper-plane"></i>
                            Gửi giao dịch
                        </button>
                    </div>
                    
                    <div class="transaction-preview">
                        <h3>Xem trước giao dịch</h3>
                        <div class="preview-item">
                            <span>Số tiền gửi:</span>
                            <span id="preview-amount">0.00 MYC</span>
                        </div>
                        <div class="preview-item">
                            <span>Phí giao dịch:</span>
                            <span id="preview-fee">0.01 MYC</span>
                        </div>
                        <div class="preview-item total">
                            <span>Tổng cộng:</span>
                            <span id="preview-total">0.01 MYC</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="history">
                <div class="page-header">
                    <h1>Lịch sử giao dịch</h1>
                    <div class="history-controls">
                        <input type="text" id="search-address" placeholder="Nhập địa chỉ ví để tìm kiếm...">
                        <button class="action-btn primary" onclick="searchTransactions()">
                            <i class="fas fa-search"></i>
                            Tìm kiếm
                        </button>
                    </div>
                </div>
                
                <div class="history-section">
                    <div class="history-stats">
                        <div class="stat-item">
                            <span>Tổng giao dịch:</span>
                            <span id="total-transactions">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Tổng gửi:</span>
                            <span id="total-sent">0.00 MYC</span>
                        </div>
                        <div class="stat-item">
                            <span>Tổng nhận:</span>
                            <span id="total-received">0.00 MYC</span>
                        </div>
                    </div>
                    
                    <div class="transaction-table">
                        <table id="transaction-history-table">
                            <thead>
                                <tr>
                                    <th>Hash</th>
                                    <th>Khối</th>
                                    <th>Thời gian</th>
                                    <th>Từ</th>
                                    <th>Đến</th>
                                    <th>Số lượng</th>
                                    <th>Phí</th>
                                    <th>Trạng thái</th>
                                </tr>
                            </thead>
                            <tbody id="transaction-history-body">
                                <!-- Transaction history will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="pagination-controls" id="pagination-controls" style="display: none;">
                        <div class="pagination-info">
                            <span>Hiển thị <span id="showing-from">1</span>-<span id="showing-to">4</span> trong <span id="total-transactions-count">0</span> giao dịch</span>
                        </div>
                        <div class="pagination-buttons">
                            <button class="action-btn secondary" id="prev-page" onclick="changePage(-1)" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Trước
                            </button>
                            <span class="page-info">Trang <span id="current-page">1</span> / <span id="total-pages">1</span></span>
                            <button class="action-btn secondary" id="next-page" onclick="changePage(1)">
                                Tiếp
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mining Tab -->
            <div class="tab-content" id="mining">
                <div class="page-header">
                    <h1>Mining & Consensus</h1>
                </div>
                
                <div class="mining-section">
                    <div class="consensus-info">
                        <h3>Thông tin Consensus</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span>Loại Consensus:</span>
                                <span id="current-consensus">Proof of Stake (PoS)</span>
                            </div>
                            <div class="info-item">
                                <span>Block Reward:</span>
                                <span id="current-mining-reward">10.00 MYC</span>
                            </div>
                            <div class="info-item">
                                <span>Số Validators:</span>
                                <span id="total-validators">0</span>
                            </div>
                            <div class="info-item">
                                <span>Giao dịch chờ:</span>
                                <span id="mining-pending-tx">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mining-controls">
                        <div class="mining-info">
                            <h4><i class="fas fa-robot"></i> Auto-Mining: <span class="status-good">Hoạt động</span></h4>
                            <p>Hệ thống tự động tạo khối mỗi 15 giây khi có giao dịch chờ xử lý</p>
                        </div>
                        <div class="form-group">
                            <label>Địa chỉ Miner (tạo khối thủ công):</label>
                            <input type="text" id="miner-address" placeholder="Địa chỉ nhận phần thưởng mining...">
                        </div>
                        <button class="action-btn primary" onclick="mineBlock()">
                            <i class="fas fa-pickaxe"></i>
                            Tạo khối thủ công
                        </button>
                    </div>
                    
                    <div class="mining-stats">
                        <h3>Thống kê Mining</h3>
                        <div class="stat-grid">
                            <div class="stat-item">
                                <span>Khối cuối:</span>
                                <span id="latest-block-hash">N/A</span>
                            </div>
                            <div class="stat-item">
                                <span>Thời gian khối cuối:</span>
                                <span id="latest-block-time">N/A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Staking Tab -->
            <div class="tab-content" id="staking">
                <div class="page-header">
                    <h1>Staking MyCoin</h1>
                </div>
                
                <div class="staking-section">
                    <div class="staking-info">
                        <h3>Thông tin Staking</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span>Minimum Stake:</span>
                                <span id="min-stake">100.00 MYC</span>
                            </div>
                            <div class="info-item">
                                <span>Reward Rate:</span>
                                <span id="reward-rate">10%</span>
                            </div>
                            <div class="info-item">
                                <span>Max Validators:</span>
                                <span id="max-validators">100</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="staking-controls">
                        <div class="staking-form">
                            <h3>Stake Coins</h3>
                            <div class="form-group">
                                <label>Địa chỉ ví:</label>
                                <input type="text" id="stake-address" placeholder="Địa chỉ ví để stake...">
                            </div>
                            <div class="form-group">
                                <label>Private Key:</label>
                                <input type="password" id="stake-private-key" placeholder="Private key...">
                            </div>
                            <div class="form-group">
                                <label>Số lượng stake (MYC):</label>
                                <input type="number" id="stake-amount" step="0.01" min="100" placeholder="100.00">
                            </div>
                            <button class="action-btn primary" onclick="stakeCoins()">
                                <i class="fas fa-coins"></i>
                                Stake Coins
                            </button>
                        </div>
                        
                        <div class="unstaking-form">
                            <h3>Unstake Coins</h3>
                            <div class="form-group">
                                <label>Địa chỉ validator:</label>
                                <input type="text" id="unstake-address" placeholder="Địa chỉ validator...">
                            </div>
                            <div class="form-group">
                                <label>Private Key:</label>
                                <input type="password" id="unstake-private-key" placeholder="Private key...">
                            </div>
                            <button class="action-btn secondary" onclick="unstakeCoins()">
                                <i class="fas fa-undo"></i>
                                Unstake Coins
                            </button>
                        </div>
                    </div>
                    
                    <div class="validators-list">
                        <h3>Danh sách Validators</h3>
                        <div class="validators-table">
                            <table id="validators-table">
                                <thead>
                                    <tr>
                                        <th>Địa chỉ</th>
                                        <th>Số coin stake</th>
                                        <th>Thời gian stake</th>
                                        <th>Trạng thái</th>
                                    </tr>
                                </thead>
                                <tbody id="validators-body">
                                    <!-- Validators will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-sync-alt fa-spin"></i>
                <p>Đang xử lý...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>